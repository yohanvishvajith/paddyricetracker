{
  "_format": "hh3-sol-build-info-1",
  "id": "solc-0_8_28-7f9bea4a796d8e4aebc17bce78932eb19f174f5c",
  "solcVersion": "0.8.28",
  "solcLongVersion": "0.8.28+commit.7893614a",
  "userSourceNameMap": {
    "contracts/Operations.sol": "project/contracts/Operations.sol"
  },
  "input": {
    "language": "Solidity",
    "settings": {
      "evmVersion": "cancun",
      "optimizer": {
        "enabled": true,
        "runs": 200
      },
      "outputSelection": {
        "*": {
          "": [
            "ast"
          ],
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ]
        }
      },
      "remappings": [],
      "viaIR": true
    },
    "sources": {
      "project/contracts/Operations.sol": {
        "content": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.20;\r\n\r\ncontract Operations{\r\n    // --- Initial Paddy records ---\r\n    uint256 public nextPaddyRecordId;\r\n    mapping(uint256 => string) public paddyRecordUserId;\r\n    mapping(uint256 => string) public paddyRecordPaddyType;\r\n    mapping(uint256 => uint256) public paddyRecordQuantity;\r\n    mapping(uint256 => uint256) public paddyRecordDate;\r\n    mapping(uint256 => bool) public paddyRecordStatus;\r\n\r\n    // --- Damage records ---\r\n    uint256 public nextDamageId;\r\n    mapping(uint256 => string) public damageUserId;\r\n    mapping(uint256 => string) public damagePaddyType;\r\n    mapping(uint256 => uint256) public damageQuantity;\r\n    mapping(uint256 => uint256) public damageDateTimestamp;\r\n    mapping(uint256 => string) public damageReason;\r\n\r\n    // --- Milling records ---\r\n    uint256 public nextMillingRecordId;\r\n    mapping(uint256 => uint256) public millingInputPaddy;\r\n    mapping(uint256 => uint256) public millingOutputRice;\r\n    mapping(uint256 => uint256) public millingDateTime;\r\n    mapping(uint256 => string) public millingPaddyType;\r\n    mapping(uint256 => uint256) public millingDryingDuration;\r\n    mapping(uint256 => bool) public millingStatus;\r\n\r\n    // --- Rice Damage records ---\r\n    uint256 public nextRiceDamageId;\r\n    mapping(uint256 => string) public riceDamageUserId;\r\n    mapping(uint256 => string) public riceDamageType;\r\n    mapping(uint256 => uint256) public riceDamageQuantity;\r\n    mapping(uint256 => uint256) public riceDamageDateTimestamp;\r\n    mapping(uint256 => string) public riceDamageReason;\r\n\r\n    // --- Transaction tracking ---\r\n    uint256 public nextTxId;\r\n    mapping(uint256 => string) public txFromParty;\r\n    mapping(uint256 => string) public txToParty;\r\n    mapping(uint256 => string) public txProductType;\r\n    mapping(uint256 => uint256) public txQuantity;\r\n    mapping(uint256 => uint256) public txPrice;\r\n    mapping(uint256 => uint256) public txTimestamp;\r\n    mapping(uint256 => bool) public txStatus;\r\n\r\n    // Optional indexes for traceability per actor\r\n    mapping(string => uint256[]) public sentTxs;    // sender name -> txIds\r\n    mapping(string => uint256[]) public receivedTxs; // receiver name -> txIds\r\n\r\n    // --- Rice Transaction tracking ---\r\n    uint256 public nextRiceTxId;\r\n    mapping(uint256 => string) public riceTxFromParty;\r\n    mapping(uint256 => string) public riceTxToParty;\r\n    mapping(uint256 => string) public riceTxRiceType;\r\n    mapping(uint256 => uint256) public riceTxQuantity;\r\n    mapping(uint256 => uint256) public riceTxPrice;\r\n    mapping(uint256 => uint256) public riceTxTimestamp;\r\n    mapping(uint256 => bool) public riceTxStatus;\r\n\r\n    // Optional indexes for rice transaction traceability per actor\r\n    mapping(string => uint256[]) public sentRiceTxs;    // sender name -> riceTxIds\r\n    mapping(string => uint256[]) public receivedRiceTxs; // receiver name -> riceTxIds\r\n\r\n    // --- Events ---\r\n    event InitialPaddyRecorded(\r\n        uint256 indexed recordId,\r\n        string userId,\r\n        string paddyType,\r\n        uint256 quantity,\r\n        uint256 date,\r\n        bool status\r\n    );\r\n\r\n    event DamageRecorded(\r\n        uint256 indexed damageId,\r\n        string userId,\r\n        string paddyType,\r\n        uint256 quantity,\r\n        uint256 damageDate,\r\n        string reason\r\n    );\r\n    \r\n    event MillingRecorded(\r\n        uint256 indexed millingId,\r\n        uint256 inputPaddy,\r\n        uint256 outputRice,\r\n        uint256 dateTime,\r\n        string paddyType,\r\n        uint256 dryingDuration,\r\n        bool status\r\n    );\r\n    \r\n    event RiceDamageRecorded(\r\n        uint256 indexed riceDamageId,\r\n        string userId,\r\n        string riceType,\r\n        uint256 quantity,\r\n        uint256 damageDate,\r\n        string reason\r\n    );\r\n    \r\n    // Log for off-chain traceability\r\n    event TransactionRecorded(\r\n        uint256 indexed txId,\r\n        string indexed fromParty,\r\n        string indexed toParty,\r\n        string productType,\r\n        uint256 quantity,\r\n        uint256 price,\r\n        uint256 timestamp,\r\n        bool status\r\n    );\r\n\r\n    event RiceTransactionRecorded(\r\n        uint256 indexed riceTxId,\r\n        string indexed fromParty,\r\n        string indexed toParty,\r\n        string riceType,\r\n        uint256 quantity,\r\n        uint256 price,\r\n        uint256 timestamp,\r\n        bool status\r\n    );\r\n\r\n    // --- Update Events ---\r\n    event InitialPaddyUpdated(\r\n        uint256 indexed recordId,\r\n        string userId,\r\n        string paddyType,\r\n        uint256 quantity,\r\n        uint256 date,\r\n        bool status\r\n    );\r\n\r\n    // --- Save Initial Paddy Record ---\r\n    function saveInitialPaddyRecord(\r\n        string calldata userId,\r\n        string calldata paddyType,\r\n        uint256 quantity,\r\n        uint256 date,\r\n        bool status\r\n    ) external returns (uint256) {\r\n        uint256 recordId = nextPaddyRecordId;\r\n        if (recordId == 0) {\r\n            recordId = 1;\r\n            nextPaddyRecordId = 2;\r\n        } else {\r\n            nextPaddyRecordId = recordId + 1;\r\n        }\r\n\r\n        paddyRecordUserId[recordId] = userId;\r\n        paddyRecordPaddyType[recordId] = paddyType;\r\n        paddyRecordQuantity[recordId] = quantity;\r\n        paddyRecordDate[recordId] = date;\r\n        paddyRecordStatus[recordId] = status;\r\n\r\n        emit InitialPaddyRecorded(\r\n            recordId,\r\n            userId,\r\n            paddyType,\r\n            quantity,\r\n            date,\r\n            status\r\n        );\r\n\r\n        return recordId;\r\n    }\r\n\r\n    // (bulk-save removed)\r\n\r\n    // --- Transaction recording ---\r\n    function recordTransaction(\r\n        string calldata fromParty,\r\n        string calldata toParty,\r\n        string calldata productType,\r\n        uint256 quantity,\r\n        uint256 price,\r\n        bool status\r\n    ) external returns (uint256) {\r\n        uint256 txId = nextTxId;\r\n        // initialize nextTxId if zero (start at 1)\r\n        if (txId == 0) {\r\n            txId = 1;\r\n            nextTxId = 2;\r\n        } else {\r\n            nextTxId = txId + 1;\r\n        }\r\n\r\n        txFromParty[txId] = fromParty;\r\n        txToParty[txId] = toParty;\r\n        txProductType[txId] = productType;\r\n        txQuantity[txId] = quantity;\r\n        txPrice[txId] = price;\r\n        txTimestamp[txId] = block.timestamp;\r\n        txStatus[txId] = status;\r\n\r\n        sentTxs[fromParty].push(txId);\r\n        receivedTxs[toParty].push(txId);\r\n\r\n        emit TransactionRecorded(txId, fromParty, toParty, productType, quantity, price, block.timestamp, status);\r\n\r\n        return txId;\r\n    }\r\n\r\n    // --- Rice Transaction recording ---\r\n    function recordRiceTransaction(\r\n        string calldata fromParty,\r\n        string calldata toParty,\r\n        string calldata riceType,\r\n        uint256 quantity,\r\n        uint256 price,\r\n        bool status\r\n    ) external returns (uint256) {\r\n        uint256 riceTxId = nextRiceTxId;\r\n        // initialize nextRiceTxId if zero (start at 1)\r\n        if (riceTxId == 0) {\r\n            riceTxId = 1;\r\n            nextRiceTxId = 2;\r\n        } else {\r\n            nextRiceTxId = riceTxId + 1;\r\n        }\r\n\r\n        riceTxFromParty[riceTxId] = fromParty;\r\n        riceTxToParty[riceTxId] = toParty;\r\n        riceTxRiceType[riceTxId] = riceType;\r\n        riceTxQuantity[riceTxId] = quantity;\r\n        riceTxPrice[riceTxId] = price;\r\n        riceTxTimestamp[riceTxId] = block.timestamp;\r\n        riceTxStatus[riceTxId] = status;\r\n\r\n        sentRiceTxs[fromParty].push(riceTxId);\r\n        receivedRiceTxs[toParty].push(riceTxId);\r\n\r\n        emit RiceTransactionRecorded(riceTxId, fromParty, toParty, riceType, quantity, price, block.timestamp, status);\r\n\r\n        return riceTxId;\r\n    }\r\n\r\n    // --- Record Damage ---\r\n    function recordDamage(\r\n        string calldata userId,\r\n        string calldata paddyType,\r\n        uint256 quantity,\r\n        uint256 damageDate,\r\n        string calldata reason\r\n    ) external returns (uint256) {\r\n        uint256 damageId = nextDamageId;\r\n        if (damageId == 0) {\r\n            damageId = 1;\r\n            nextDamageId = 2;\r\n        } else {\r\n            nextDamageId = damageId + 1;\r\n        }\r\n\r\n        damageUserId[damageId] = userId;\r\n        damagePaddyType[damageId] = paddyType;\r\n        damageQuantity[damageId] = quantity;\r\n        damageDateTimestamp[damageId] = damageDate;\r\n        damageReason[damageId] = reason;\r\n\r\n        emit DamageRecorded(\r\n            damageId,\r\n            userId,\r\n            paddyType,\r\n            quantity,\r\n            damageDate,\r\n            reason\r\n        );\r\n\r\n        return damageId;\r\n    }\r\n\r\n    // --- Record Milling ---\r\n    function recordMilling(\r\n        uint256 inputPaddy,\r\n        uint256 outputRice,\r\n        uint256 dateTime,\r\n        string calldata paddyType,\r\n        uint256 dryingDuration,\r\n        bool status\r\n    ) external returns (uint256) {\r\n        uint256 millingId = nextMillingRecordId;\r\n        if (millingId == 0) {\r\n            millingId = 1;\r\n            nextMillingRecordId = 2;\r\n        } else {\r\n            nextMillingRecordId = millingId + 1;\r\n        }\r\n\r\n        millingInputPaddy[millingId] = inputPaddy;\r\n        millingOutputRice[millingId] = outputRice;\r\n        millingDateTime[millingId] = dateTime;\r\n        millingPaddyType[millingId] = paddyType;\r\n        millingDryingDuration[millingId] = dryingDuration;\r\n        millingStatus[millingId] = status;\r\n\r\n        emit MillingRecorded(\r\n            millingId,\r\n            inputPaddy,\r\n            outputRice,\r\n            dateTime,\r\n            paddyType,\r\n            dryingDuration,\r\n            status\r\n        );\r\n\r\n        return millingId;\r\n    }\r\n\r\n    // --- Record Rice Damage ---\r\n    function recordRiceDamage(\r\n        string calldata userId,\r\n        string calldata riceType,\r\n        uint256 quantity,\r\n        uint256 damageDate,\r\n        string calldata reason\r\n    ) external returns (uint256) {\r\n        uint256 riceDamageId = nextRiceDamageId;\r\n        if (riceDamageId == 0) {\r\n            riceDamageId = 1;\r\n            nextRiceDamageId = 2;\r\n        } else {\r\n            nextRiceDamageId = riceDamageId + 1;\r\n        }\r\n\r\n        riceDamageUserId[riceDamageId] = userId;\r\n        riceDamageType[riceDamageId] = riceType;\r\n        riceDamageQuantity[riceDamageId] = quantity;\r\n        riceDamageDateTimestamp[riceDamageId] = damageDate;\r\n        riceDamageReason[riceDamageId] = reason;\r\n\r\n        emit RiceDamageRecorded(\r\n            riceDamageId,\r\n            userId,\r\n            riceType,\r\n            quantity,\r\n            damageDate,\r\n            reason\r\n        );\r\n\r\n        return riceDamageId;\r\n    }\r\n\r\n    // --- Getters ---\r\n    function getInitialPaddyRecord(uint256 recordId) external view returns (\r\n        string memory userId,\r\n        string memory paddyType,\r\n        uint256 quantity,\r\n        uint256 date,\r\n        bool status\r\n    ) {\r\n        require(recordId > 0 && recordId < nextPaddyRecordId, \"Invalid record ID\");\r\n        return (\r\n            paddyRecordUserId[recordId],\r\n            paddyRecordPaddyType[recordId],\r\n            paddyRecordQuantity[recordId],\r\n            paddyRecordDate[recordId],\r\n            paddyRecordStatus[recordId]\r\n        );\r\n    }\r\n\r\n    function getTransaction(uint256 txId) external view returns (\r\n        string memory fromParty,\r\n        string memory toParty,\r\n        string memory productType,\r\n        uint256 quantity,\r\n        uint256 price,\r\n        uint256 timestamp,\r\n        bool status\r\n    ) {\r\n        require(txId > 0 && txId < nextTxId, \"Invalid tx ID\");\r\n        return (\r\n            txFromParty[txId],\r\n            txToParty[txId],\r\n            txProductType[txId],\r\n            txQuantity[txId],\r\n            txPrice[txId],\r\n            txTimestamp[txId],\r\n            txStatus[txId]\r\n        );\r\n    }\r\n\r\n    function getRiceTransaction(uint256 riceTxId) external view returns (\r\n        string memory fromParty,\r\n        string memory toParty,\r\n        string memory riceType,\r\n        uint256 quantity,\r\n        uint256 price,\r\n        uint256 timestamp,\r\n        bool status\r\n    ) {\r\n        require(riceTxId > 0 && riceTxId < nextRiceTxId, \"Invalid rice tx ID\");\r\n        return (\r\n            riceTxFromParty[riceTxId],\r\n            riceTxToParty[riceTxId],\r\n            riceTxRiceType[riceTxId],\r\n            riceTxQuantity[riceTxId],\r\n            riceTxPrice[riceTxId],\r\n            riceTxTimestamp[riceTxId],\r\n            riceTxStatus[riceTxId]\r\n        );\r\n    }\r\n\r\n    function getDamage(uint256 damageId) external view returns (\r\n        string memory userId,\r\n        string memory paddyType,\r\n        uint256 quantity,\r\n        uint256 damageDate,\r\n        string memory reason\r\n    ) {\r\n        require(damageId > 0 && damageId < nextDamageId, \"Invalid damage ID\");\r\n        return (\r\n            damageUserId[damageId],\r\n            damagePaddyType[damageId],\r\n            damageQuantity[damageId],\r\n            damageDateTimestamp[damageId],\r\n            damageReason[damageId]\r\n        );\r\n    }\r\n\r\n    function getMilling(uint256 millingId) external view returns (\r\n        uint256 inputPaddy,\r\n        uint256 outputRice,\r\n        uint256 dateTime,\r\n        string memory paddyType,\r\n        uint256 dryingDuration,\r\n        bool status\r\n    ) {\r\n        require(millingId > 0 && millingId < nextMillingRecordId, \"Invalid milling ID\");\r\n        return (\r\n            millingInputPaddy[millingId],\r\n            millingOutputRice[millingId],\r\n            millingDateTime[millingId],\r\n            millingPaddyType[millingId],\r\n            millingDryingDuration[millingId],\r\n            millingStatus[millingId]\r\n        );\r\n    }\r\n\r\n    function getRiceDamage(uint256 riceDamageId) external view returns (\r\n        string memory userId,\r\n        string memory riceType,\r\n        uint256 quantity,\r\n        uint256 damageDate,\r\n        string memory reason\r\n    ) {\r\n        require(riceDamageId > 0 && riceDamageId < nextRiceDamageId, \"Invalid rice damage ID\");\r\n        return (\r\n            riceDamageUserId[riceDamageId],\r\n            riceDamageType[riceDamageId],\r\n            riceDamageQuantity[riceDamageId],\r\n            riceDamageDateTimestamp[riceDamageId],\r\n            riceDamageReason[riceDamageId]\r\n        );\r\n    }\r\n}\r\n\r\n"
      }
    }
  }
}